# UI组件验证Hook

## Hook配置

**触发条件**: 当保存UI组件文件时
**执行频率**: 每次保存UI文件
**适用文件**: `ui/**/*.py`

## Hook描述

这个hook会在您保存UI组件文件时自动验证组件的实现是否符合MiniCRM的UI设计规范和用户体验要求。

## 执行任务

1. **组件结构验证**
   - 检查组件是否继承自正确的基类
   - 验证必要的方法是否已实现
   - 确认组件初始化参数的正确性

2. **UI设计规范检查**
   - 验证是否使用了统一的主题和样式
   - 检查字体、颜色、间距是否符合设计规范
   - 确认组件布局是否响应式

3. **用户体验验证**
   - 检查是否有适当的错误处理和用户反馈
   - 验证加载状态和进度指示器
   - 确认快捷键和右键菜单的实现

4. **无障碍性检查**
   - 验证组件是否支持键盘导航
   - 检查是否有适当的标签和描述
   - 确认颜色对比度是否符合标准

5. **性能检查**
   - 检查是否有不必要的重绘或重新计算
   - 验证大数据集的处理方式
   - 确认内存泄漏的预防措施

## 验证规则

### 必需的方法
- `__init__()`: 正确的初始化
- `_setup_ui()`: UI布局设置
- `_bind_events()`: 事件绑定
- `cleanup()`: 资源清理

### 设计规范
- 使用项目定义的字体和颜色常量
- 遵循统一的间距和布局规则
- 实现主题切换支持

### 错误处理
- 所有用户操作都有适当的错误处理
- 显示友好的错误消息
- 提供操作撤销或重试选项

## 输出格式

```
🎨 UI组件验证结果：

✅ 组件结构正确
✅ 设计规范符合
✅ 用户体验良好
✅ 无障碍性支持
✅ 性能优化到位

或

❌ 发现以下问题：

1. 组件结构问题：
   - 缺少cleanup()方法，可能导致内存泄漏
   - 建议：添加资源清理方法

2. 设计规范问题：
   - 使用了硬编码颜色值 '#FF0000'
   - 建议：使用主题常量 THEME['danger']

3. 用户体验问题：
   - 长时间操作缺少进度指示
   - 建议：添加进度条或加载动画

4. 性能问题：
   - 在循环中创建大量UI元素
   - 建议：使用虚拟化或分页显示
```
